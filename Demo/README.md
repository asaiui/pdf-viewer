# SVG Book Flip Demo - リファクタリング版

このディレクトリには、SVGベースのページめくりアニメーションデモのリファクタリング版が含まれています。

## 🔄 リファクタリング内容

### ✅ 改善されたポイント

#### 1. **エラーハンドリング強化**
- try-catch文による包括的なエラー処理
- null/undefined チェックの追加
- フォールバック処理の実装
- ユーザーフレンドリーなエラー表示

#### 2. **アクセシビリティ大幅改善**
- キーボードナビゲーション完全対応
- ARIA属性の適切な実装
- スクリーンリーダー対応
- フォーカス管理
- スキップリンクの追加

#### 3. **設定ベース実装**
- 設定オブジェクトによる柔軟な制御
- ハードコーディングの削除
- 再利用可能なコンポーネント設計

#### 4. **パフォーマンス最適化**
- アニメーション中の重複実行防止
- debounce処理による負荷軽減
- CSSクラスベースの制御
- メモリリーク対策

#### 5. **コード構造の整理**
- ES6 Classベースの実装
- モジュール化されたメソッド構成
- 明確な責任分離
- 保守性の向上

## 📁 ファイル構成

```
Demo/
├── book-flip.html          # メインHTMLファイル（アクセシビリティ改善済み）
├── book-flip.js           # リファクタリング済みJavaScript
├── book-flip.css          # スタイルシート（追加CSSクラス含む）
├── README.md              # このファイル
└── SVG/                   # SVGページファイル（30ページ）
    ├── page-0001.svg
    ├── page-0002.svg
    └── ...
```

## 🚀 使用方法

### 基本的な使用法
```javascript
// デフォルト設定で初期化
new BookFlipDemo();

// カスタム設定で初期化
new BookFlipDemo({
    totalPages: 30,
    svgPath: './SVG/',
    animationDuration: 1500
});
```

### キーボードショートカット
| キー | 動作 |
|------|------|
| `←` / `↑` / `PageUp` | 前のページ |
| `→` / `↓` / `PageDown` / `Space` | 次のページ |
| `Home` | 最初のページ |
| `End` | 最後のページ |
| `Escape` | メニューを閉じる |
| `?` | キーボードヘルプ表示 |

### マウス操作
- **右半分クリック**: 次のページ
- **左半分クリック**: 前のページ
- **目次ボタン**: 目次の開閉

## 🔧 設定オプション

```javascript
const config = {
    totalPages: 30,              // 総ページ数
    svgPath: './SVG/',           // SVGファイルのパス
    filePattern: 'page-{number:04d}.svg', // ファイル名パターン
    animationDuration: 1200      // アニメーション時間（ミリ秒）
};
```

## 🌐 ブラウザサポート

- **Chrome 80+**
- **Firefox 75+**
- **Safari 13+**
- **Edge 80+**

### 必要な機能
- ES6 Classes
- CSS Flexbox
- CSS Grid
- CSS Transforms 3D

## ♿ アクセシビリティ機能

### スクリーンリーダー対応
- 適切なARIA属性
- セマンティックHTML
- 音声読み上げ対応

### キーボードナビゲーション
- 全機能のキーボード操作対応
- 視覚的なフォーカス表示
- 論理的なタブ順序

### 運動機能に配慮
- 大きなクリック領域
- 複数の操作方法を提供
- アニメーション速度調整可能

## 🔒 セキュリティ考慮事項

### 実装済み対策
- XSS防止のためのDOM操作制限
- CSPヘッダー推奨設定
- 入力値検証

### 推奨事項
- HTTPS での配信
- SVGファイルの内容検証
- Content Security Policy の設定

## 🎯 パフォーマンス最適化

### 実装済み最適化
- アニメーション重複実行防止
- リサイズイベントのdebounce処理
- メモリリーク防止

### 推奨改善
- SVGファイルの事前ロード
- Intersection Observer による遅延読み込み
- Service Worker によるキャッシュ

## 🐛 トラブルシューティング

### よくある問題

1. **SVGファイルが表示されない**
   - ファイルパスの確認
   - ファイル名の形式確認（page-0001.svg など）
   - CORS設定の確認

2. **アニメーションが動作しない**
   - CSS Transform のブラウザサポート確認
   - JavaScript エラーのコンソール確認

3. **キーボードナビゲーションが効かない**
   - フォーカスがbook要素にあることを確認
   - 入力フィールドにフォーカスがないことを確認

## 📈 今後の改善予定

- [ ] タッチジェスチャー対応
- [ ] 音声読み上げ機能
- [ ] 全文検索機能
- [ ] ブックマーク機能
- [ ] 印刷機能

## 🤝 貢献方法

1. Fork このリポジトリ
2. Feature ブランチを作成
3. 変更をコミット
4. プルリクエストを作成

## 📄 ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

---

**開発日**: 2025年7月14日  
**バージョン**: 2.0.0 (リファクタリング版)  
**対応言語**: 日本語